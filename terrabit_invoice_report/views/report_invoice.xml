<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
    <template id="terrabit_report_invoice_document">
            <!-- Multicompany -->
            <t t-if="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id"/>
            </t>
            <t t-if="not o or not 'company_id' in o">
                <t t-set="company" t-value="res_company"/>
            </t>
            <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})" />
            <div class="page">
                <div id="header">
                    <div class="row" customize_show="True">
                        <div class="col-s-3" style="height:45px;">
                            <t t-if="o.number">
                                <t t-set="invoice_number" t-value="o.number"/>
                            </t>
                            <t t-if="not o.number">
                                <t t-set="invoice_number" t-value="' '"/>
                            </t>
							<t t-if="o.commercial_partner_id.ref">
                                <t t-set="ref_client" t-value="o.commercial_partner_id.ref"/>
                                <t t-set="barcode" t-value="o.commercial_partner_id.ref+'/'+invoice_number"/>
                            </t>
                            <t t-if="not o.commercial_partner_id.ref">
                                <t t-set="ref_client" t-value="'/'"/>
                                <t t-set="barcode" t-value="invoice_number"/>
                            </t>
							<img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 80px;vertical-align:middle;float:left;"/>
							<img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=1' % ('Code128', barcode, 1000, 200)" style="margin-top: 0px; width:340px; height:60px;float:right;"/>
                            <!--<img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 80px;"/>-->
                        </div>
                        <div class="col-xs-9 text-right" style="margin-top:20px;" t-field="company.rml_header1"/>
                    </div>
                    <div class="row zero_min_height">
                        <div class="col-xs-12">
                            <div style="border-bottom: 1px solid black;"/>
                        </div>
                    </div>

                    <table class="table table-condensed" style="border-top: initial;">
                        <tr>
                            <td width="35%">
                                <div>
                                    <strong t-if="o.type in ['out_invoice', 'out_refund']">Furnizor</strong>
                                    <strong t-if="o.type in ['in_invoice', 'in_refund']">Client</strong>
                                </div>
                                <strong t-field="res_company.partner_id.name"/>
                                <div>
                                    <strong>Adresa:</strong>
                                    <address t-field="res_company.partner_id" t-field-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;,&quot;phone&quot;, &quot;fax&quot;], &quot;no_marker&quot;: false, &quot;no_tag_br&quot;: true}"/>
                                </div>

                                <small>
                                    <t t-set="banks" t-value="o.get_banks()"/>
                                    <div t-foreach="banks" t-as="bank">
                                        <span t-if="bank.bank_id">
                                            <strong>Banca:</strong>
                                            <span t-field="bank.bank_id.name"/>
                                        </span>
                                        <br />
                                        <span t-if="bank.name">
                                            <strong>Cont:</strong>
                                            <span t-field="bank.name"/>
                                        </span>
                                    </div>
                                    <!--<div t-foreach="res_company.partner_id.bank_ids" t-as="bank">
                                        <t t-if="bank.">
                                            <span t-if="bank.bank_name">
                                                <strong>Banca:</strong>
                                                <span t-field="bank.bank_name"/>
                                            </span>
                                            <br />
                                            <span t-if="bank.acc_number">
                                                <strong>Cont:</strong>
                                                <span t-field="bank.acc_number"/>
                                            </span>
                                        </t>
                                    </div>-->
                                </small>
                                <div t-if="res_company.partner_id.vat">
                                    <strong>CIF:</strong>
                                    <span t-field="res_company.partner_id.vat"/>
                                </div>
                                <div t-if="res_company.partner_id.nrc">
                                    <strong>Nr. Reg. Com:</strong>
                                    <span t-field="res_company.partner_id.nrc"/>
                                </div>
                                <div t-if="res_company.share_capital">
                                    <strong>Capital social:</strong>
                                    <span t-field="res_company.share_capital"/>
                                </div>
                                <div t-if="'vat_on_payment' in res_company._fields">
                                    <div t-if="res_company.vat_on_payment">
                                        <span>Vat on payment</span>
                                    </div>
                                </div>
                                <div>
                                    <span t-foreach="o.tax_line_ids" t-as="t">
                                        <span t-field="t.name"/>
                                    </span>
                                </div>
                            </td>
                            <td width="30%" height="100%" style="vertical-align:middle;text-align:center;">
                                <!--<img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-width: 200px;;vertical-align:middle;margin-left:auto;margin-right:auto;"/>-->
                            </td>
                            <td width="35%">
                                <div>
                                    <strong t-if="o.type in ['out_invoice', 'out_refund']">Client</strong>
                                    <strong t-if="o.type in ['in_invoice', 'in_refund']">Furnizor</strong>
                                </div>
                                <div>
                                    <strong t-field="o.commercial_partner_id.name"/>
                                </div>
                                <div>
                                    <strong>Adresa:</strong>
                                    <address t-field="o.commercial_partner_id" t-field-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;phone&quot;, &quot;fax&quot;], &quot;no_marker&quot;: false, &quot;no_tag_br&quot;: true}"/>
                                </div>
                                <small>
                                    <div t-foreach="o.commercial_partner_id.bank_ids" t-as="bank">
                                        <span t-if="bank.bank_name">
                                            <strong>Banca:</strong>
                                            <span t-field="bank.bank_name"/>
                                        </span>
                                        <br />
                                        <span t-if="bank.acc_number">
                                            <strong>Cont:</strong>
                                            <span t-field="bank.acc_number"/>
                                        </span>
                                    </div>
                                </small>
                                <div t-if="o.commercial_partner_id.vat">
                                    <strong>CIF:</strong>
                                    <span t-field="o.commercial_partner_id.vat"/>
                                </div>
                                <div t-if="o.commercial_partner_id.nrc">
                                    <strong>Nr. Reg. Com:</strong>
                                    <span t-field="o.commercial_partner_id.nrc"/>
                                </div>
								<div t-if="o.commercial_partner_id.ref">
									<strong>Cod client: </strong>
									<span t-field="o.commercial_partner_id.ref"/><br/>
									<!--<img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=0' % ('Code128', o.commercial_partner_id.ref, 1000, 200)" style="margin-top: 0px; width:250px; height:50px"/>-->
								</div>
                                <div t-if="o.agreement_id">
									<strong>Nr. contract: </strong>
									<span t-field="o.agreement_id.code"/><br/>
								</div>

                            </td>
                        </tr>
                        <!--<tr>
                            <td style="border-top: initial;">
                                <div t-if="res_company.partner_id.vat">
                                    <strong>CIF:</strong>
                                    <span t-field="res_company.partner_id.vat"/>
                                </div>
                                <div t-if="res_company.partner_id.nrc">
                                    <strong>Nr. Reg. Com:</strong>
                                    <span t-field="res_company.partner_id.nrc"/>
                                </div>
                                <div t-if="res_company.share_capital">
                                    <strong>Capital social:</strong>
                                    <span t-field="res_company.share_capital"/>
                                </div>
                                <div t-if="'vat_on_payment' in res_company._fields">
                                    <div t-if="res_company.vat_on_payment">
                                        <span>Vat on payment</span>
                                    </div>
                                </div>
                                <div>
                                    <span t-foreach="o.tax_line_ids" t-as="t">
                                        <span t-field="t.name"/>
                                    </span>
                                </div>
                            </td>
                            <td style="border-top: initial;"></td>
                            <td style="border-top: initial;">

                            </td>
                        </tr>-->
                    </table>


                    <h4 class="text-center">
                        <span t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')">Factura</span>
                        <span t-if="o.type == 'out_invoice' and o.state == 'proforma2'">PRO-FORMA</span>
                        <span t-if="o.type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                        <span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                        <span t-if="o.type == 'out_refund'">Factura</span>
                        <span t-if="o.type == 'in_refund'">Supplier Refund</span>
                        <span t-if="o.type == 'in_invoice'">Supplier Invoice</span>
                        <t t-if="o.number">
                            <span t-field="o.number"/>
                        </t>
                        <!--
                        <t t-if="not o.number">
                            <span t-field="o.internal_number"/>
                        </t>
                         -->
                        <span>/</span>
                        <span t-field="o.date_invoice"/><br/>
			<span>Scadent la: </span> <span t-field="o.date_due"/><br/>

                        <div t-if="o.type == 'out_refund'">
                            <span>Storneaza factura</span>
                            <span t-field="o.origin"/>
                        </div>
                    </h4>
                    <!--
                    <div t-if="company.watermark_image" class="mb32 col-md-12">
                        <img t-att-src="'data:image/png;base64,%s' % company.watermark_image" style="width:100%;text-align:center;position:absolute;opacity:0.05"/>
                    </div>
                    -->
                </div> <!--end header-->
                <t t-set="nr_crt" t-value="1"/>
	                <t t-if="not currency_id">
	                    <t t-set="currency_id" t-value="o.currency_id"/>
	                </t>
	                <table class="table table-condensed  table-bordered">
	                    <thead>
	                        <tr>
	                            <th>Nr.<br />Crt</th>
	                            <th>Denumire</th>
	                            <th>Cantitate</th>
	                            <th class="text-right">Pret unitar</th>
	                            <th class="text-right" t-if="with_discount(o)" groups="sale.group_discount_per_so_line">Discount (%)
	                            </th>
	                            <th class="text-right">Valoare</th>
	                            <th class="text-right">TVA</th>
	                            <!-- daca se vrea cu valoare totala: -->
	                            <!-- <th class="text-right">Total cu TVA</th> -->
	                        </tr>
	                    </thead>
	                    <tbody class="invoice_tbody">
	                        <tr t-foreach="o.invoice_line_ids" t-as="l">
	                            <td>
	                                <t t-esc="nr_crt"/>
	                                <t t-set="nr_crt" t-value="nr_crt + 1"/>
	                            </td>
	                            <td>
	                                <span t-field="l.name"/>
	                            </td>
	                            <td class="text-right">
	                                <t t-set="quantity" t-value="l.quantity"/>
	                                <t t-if="o.type == 'out_refund'">
	                                    <t t-set="quantity" t-value="-1*l.quantity"/>
	                                </t>
                                    <t t-if="quantity">
                                        <t t-esc="quantity"/>
                                    </t>

	                                <span t-field="l.uom_id" groups="product.group_uom"/>
	                            </td>
	                            <td class="text-right">
	                                <t t-set="price_unit_without_taxes" t-value="l.price_unit_without_taxes"/>
	                                <t t-set="price_unit_without_taxes" t-value="o.currency_id.with_context(date=o.date_invoice).compute(price_unit_without_taxes,currency_id)"/>
	                                <span id="price_unit_without_taxes" t-esc="formatLang(price_unit_without_taxes)"/>
	                            </td>
	                            <td class="text-right" t-if="with_discount(o)" groups="sale.group_discount_per_so_line">
	                                <span t-field="l.discount"/>
	                            </td>
	                            <td class="text-right">
	                                <t t-set="price_subtotal" t-value="l.price_subtotal"/>
	                                <t t-if="o.type == 'out_refund'">
	                                    <t t-set="price_subtotal" t-value="-1*l.price_subtotal"/>
	                                </t>
	                                <t t-set="price_subtotal" t-value="o.currency_id.with_context(date=o.date_invoice).compute(price_subtotal,currency_id)"/>
	                                <span id="price_subtotal" t-esc="formatLang(price_subtotal)"/>
	                            </td>
	                            <td class="text-right">
	                                <t t-set="price_taxes" t-value="l.price_taxes"/>
	                                <t t-if="o.type == 'out_refund'">
	                                    <t t-set="price_taxes" t-value="-1*l.price_taxes"/>

	                                </t>
	                                <t t-set="price_taxes" t-value="o.currency_id.with_context(date=o.date_invoice).compute(price_taxes,currency_id)"/>
	                                <span id="price_taxes" t-esc="formatLang(price_taxes)"/>
	                            </td>
	                            <!-- daca se vrea cu valoare totala: -->
	                            <!--
	                            <td class="text-right">
	                            	<span id="price_total" t-esc="formatLang(price_subtotal+price_taxes)" />
	                            </td>
	                             -->
	                        </tr>
	                    </tbody>
	                </table>
	                <div style="page-break-inside: avoid !important;">
	                    <div class="row">

	                        <div class="col-xs-8" t-if="o.type == 'out_invoice' or o.type == 'out_refund' ">
	                            <table class="table table-condensed">

	                                <tr class="border-black">
	                                    <td>Întocmit:</td>
	                                    <td>Informaţii privind livrarea:</td>
	                                </tr>

	                                <tr class="border-black">
	                                    <td>
	                                        <span>Nume:</span>
	                                        <span t-field="o.user_id"/><br />
	                                    </td>
	                                    <td>
                                            <!--
	                                        <div>
	                                            <span>Delegat:</span>
	                                            <span t-field="o.delegate_id"/>
	                                        </div>
	                                        <div>
	                                            <span>Mijloc de transport:</span>
	                                            <span t-field="o.mean_transp"/>
	                                        </div>
	                                        -->
	                                        <div>
	                                            <span>Semnatura de primire</span>
	                                        </div>
	                                    </td>
	                                </tr>
	                            </table>
	                        </div>

	                        <div class="col-xs-4 pull-right">
	                            <table class="table table-condensed">
	                                <tr class="border-black">
	                                    <td>
	                                        <strong>Total fara TVA</strong>
	                                    </td>
	                                    <td class="text-right">
	                                        <t t-set="amount_untaxeds" t-value="o.amount_untaxed"/>
	                                        <t t-if="o.type == 'out_refund'">
	                                            <t t-set="amount_untaxeds" t-value="-1*o.amount_untaxed"/>

	                                        </t>

	                                        <span id="amount_untaxeds">
	                                            <span t-esc="formatLang(amount_untaxeds)"/>
	                                            <span t-field="currency_id.symbol"/>
	                                        </span>
	                                    </td>
	                                </tr>
	                                <tr>
	                                    <td>TVA</td>
	                                    <td class="text-right">
	                                        <t t-set="amount_tax" t-value="o.amount_tax"/>
	                                        <t t-if="o.type == 'out_refund'">
	                                            <t t-set="amount_tax" t-value="-1*o.amount_tax"/>
	                                        </t>

	                                        <span id="amount_tax">
	                                            <span t-esc="formatLang(amount_tax)"/>
	                                            <span t-field="currency_id.symbol"/>
	                                        </span>

	                                    </td>
	                                </tr>
	                                <tr class="border-black">
	                                    <td>
	                                        <strong>Total</strong>
	                                    </td>
	                                    <td class="text-right">
	                                        <t t-set="amount_total" t-value="o.amount_total"/>
	                                        <t t-if="o.type == 'out_refund'">
	                                            <t t-set="amount_total" t-value="-1*o.amount_total"/>

	                                        </t>

	                                        <span id="amount_total">
	                                            <span t-esc="formatLang(amount_total)"/>
	                                            <span t-field="currency_id.symbol"/>
	                                        </span>

	                                        <div t-if="currency_id!=res_company.currency_id">
	                                            (
	                                            <t t-if="o.type == 'out_refund'">
	                                                <t t-set="amount_total" t-value="-1*o.move_id.amount"/>
	                                                <t t-esc="amount_total"/>
	                                                <span t-field="res_company.currency_id.symbol"/>
	                                            </t>
	                                            <t t-if="not o.type == 'out_refund'">
	                                                <span t-field="o.move_id.amount" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: res_company.currency_id}"/>

	                                            </t>

	                                            )
	                                        </div>

	                                    </td>
	                                </tr>
	                            </table>
	                        </div>
	                    </div>


	                    <p t-if="o.comment">
	                        <strong>Comment:</strong>
	                        <span t-field="o.comment"/>
	                    </p>

                        <t t-set="currencies" t-value="o.get_currencies()"/>
                        <t t-foreach="currencies" t-as="currency">
                            <t t-if="not currency==company.currency_id">
                                <t t-set="curs" t-value="currency.with_context(date=o.date_invoice).compute(1,o.currency_id,False)"/>
                                <div>1 <span t-field="currency.name"/> =  <t t-esc="'{0:.4f}'.format(round(curs,4))"/> <span t-field="o.currency_id.symbol"/> </div>
                            </t>
                        </t>
                        <t t-if="o.import_range">
                            <div>
                                <span>Perioada de facturare:</span><span t-field="o.import_range"/>
                            </div>
                        </t>
	                    <small t-if="o.type == 'out_invoice' or o.type == 'out_refund'">
	                        <div style="margin-bottom:5px;margin-top:5px;">Sistem propriu de imprimare și numerotare conform Legii 571/2003 privind Codul Fiscal cu modificările și completările ulterioare și OMFP 2226/2006.
	                        </div>

	                        <t t-if="not res_company.stamp_image">
	                            <div>Factura circula fara semnatura si stampila conform art.319 alin.(29) din Legea nr. 227/2015 privind Codul Fiscal
	                            </div>

	                        </t>
	                        <img t-if="res_company.stamp_image" t-att-src="'data:image/png;base64,%s' % res_company.stamp_image" style="max-height: 150px; "/>
	                    </small>

						<small>
							<div style="margin-left:-10px;margin-top:5px;">Plata acestei facturi se poate face la orice sucursala BRD sau Banca Transilvania din vecinatatea dumneavoastra specificand codul de client    "<span t-esc="ref_client"/>" si numarul facturii "<span t-esc="invoice_number"/>"</div>
						</small>

	                    <div t-if="o.commercial_partner_id.info_for_invoice">
	                        <span t-field="o.commercial_partner_id.info_for_invoice"/>
	                    </div>
	                    <p t-if="o.payment_term_id.note">
	                        <strong>Payment Term:</strong>
	                        <span t-field="o.payment_term_id.note"/>
	                    </p>
	                    <p t-if="o.fiscal_position_id.note">
	                        <strong>Fiscal Position Remark:</strong>
	                        <span t-field="o.fiscal_position_id.note"/>
	                    </p>
	                    <div name="reference" t-if="o.reference and o.type == 'in_invoice'">
	                        <strong>Reference:</strong>
	                        <p t-field="o.reference"/>
	                    </div>
	                </div>
            </div>
    </template>


	<template id="terrabit_report_invoice_document_eng">
            <!-- Multicompany -->
            <t t-if="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id"/>
            </t>
            <t t-if="not o or not 'company_id' in o">
                <t t-set="company" t-value="res_company"/>
            </t>
            <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})" />
            <div class="page">
                <div id="header">
                    <div class="row" customize_show="True">
                        <div class="col-s-3" style="height:45px;">
                            <t t-if="o.number">
                                <t t-set="invoice_number" t-value="o.number"/>
                            </t>
                            <t t-if="not o.number">
                                <t t-set="invoice_number" t-value="' '"/>
                            </t>
							<t t-if="o.commercial_partner_id.ref">
                                <t t-set="ref_client" t-value="o.commercial_partner_id.ref"/>
                                <t t-set="barcode" t-value="o.commercial_partner_id.ref+'/'+invoice_number"/>
                            </t>
                            <t t-if="not o.commercial_partner_id.ref">
                                <t t-set="ref_client" t-value="'/'"/>
                                <t t-set="barcode" t-value="invoice_number"/>
                            </t>
							<img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 42px;vertical-align:middle;float:left;"/>
							<img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=0' % ('Code128', barcode, 1000, 200)" style="margin-top: 0px; width:250px; height:43px;float:right;"/>
                            <!--<img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 45px;"/>-->
                        </div>
                        <div class="col-xs-9 text-right" style="margin-top:20px;" t-field="company.rml_header1"/>
                    </div>
                    <div class="row zero_min_height">
                        <div class="col-xs-12">
                            <div style="border-bottom: 1px solid black;"/>
                        </div>
                    </div>

                    <table class="table table-condensed" style="border-top: initial;">
                        <tr>
                            <td width="35%">
                                <div>
                                    <strong t-if="o.type in ['out_invoice', 'out_refund']">Supplier</strong>
                                    <strong t-if="o.type in ['in_invoice', 'in_refund']">Client</strong>
                                </div>
                                <strong t-field="res_company.partner_id.name"/>
                                <div>
                                    <strong>Adress:</strong>
                                    <address t-field="res_company.partner_id" t-field-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;,&quot;phone&quot;, &quot;fax&quot;], &quot;no_marker&quot;: false, &quot;no_tag_br&quot;: true}"/>
                                </div>

                                <small>
                                    <t t-set="banks" t-value="o.get_banks()"/>
                                    <div t-foreach="banks" t-as="bank">
                                        <span t-if="bank.bank_id">
                                            <strong>Bank:</strong>
                                            <span t-field="bank.bank_id.name"/>
                                        </span>
                                        <br />
                                        <span t-if="bank.name">
                                            <strong>Account:</strong>
                                            <span t-field="bank.name"/>
                                        </span>
                                    </div>
                                    <!--<div t-foreach="res_company.partner_id.bank_ids" t-as="bank">

                                            <span t-if="bank.bank_name">
                                                <strong>Bank:</strong>
                                                <span t-field="bank.bank_name"/>
                                            </span>
                                            <br />
                                            <span t-if="bank.acc_number">
                                                <strong>Account:</strong>
                                                <span t-field="bank.acc_number"/>
                                            </span>

                                    </div>-->
                                </small>

                            </td>
                            <td width="30%" height="100%" style="vertical-align:middle;text-align:center;">
                                <!--<img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-width: 200px;;vertical-align:middle;margin-left:auto;margin-right:auto;"/>-->
                            </td>
                            <td width="35%">
                                <div>
                                    <strong t-if="o.type in ['out_invoice', 'out_refund']">Client</strong>
                                    <strong t-if="o.type in ['in_invoice', 'in_refund']">Supplier</strong>
                                </div>
                                <div>
                                    <strong t-field="o.commercial_partner_id.name"/>
                                </div>
                                <div>
                                    <strong>Adress:</strong>
                                    <address t-field="o.commercial_partner_id" t-field-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;phone&quot;, &quot;fax&quot;], &quot;no_marker&quot;: false, &quot;no_tag_br&quot;: true}"/>
                                </div>
                                <small>
                                    <div t-foreach="o.commercial_partner_id.bank_ids" t-as="bank">
                                        <span t-if="bank.bank_name">
                                            <strong>Bank:</strong>
                                            <span t-field="bank.bank_name"/>
                                        </span>
                                        <br />
                                        <span t-if="bank.acc_number">
                                            <strong>Account:</strong>
                                            <span t-field="bank.acc_number"/>
                                        </span>
                                    </div>
                                </small>
                                <div t-if="o.commercial_partner_id.vat">
                                    <strong>VAT no.:</strong>
                                    <span t-field="o.commercial_partner_id.vat"/>
                                </div>
                                <div t-if="o.commercial_partner_id.nrc">
                                    <strong>Nr. Reg. Com:</strong>
                                    <span t-field="o.commercial_partner_id.nrc"/>
                                </div>
								<div t-if="o.commercial_partner_id.ref">
									<strong>Client code: </strong>
									<span t-field="o.commercial_partner_id.ref"/><br/>
									<!--<img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=0' % ('Code128', o.commercial_partner_id.ref, 1000, 200)" style="margin-top: 0px; width:250px; height:50px"/>-->
								</div>
                                <div t-if="o.agreement_id">
									<strong>Agreement no.: </strong>
									<span t-field="o.agreement_id.code"/><br/>
								</div>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-top: initial;">
                                <div t-if="res_company.partner_id.vat">
                                    <strong>VAT no.:</strong>
                                    <span t-field="res_company.partner_id.vat"/>
                                </div>
                                <div t-if="res_company.partner_id.nrc">
                                    <strong>Nr. Reg. Com:</strong>
                                    <span t-field="res_company.partner_id.nrc"/>
                                </div>
                                <div t-if="res_company.share_capital">
                                    <strong>Share capital:</strong>
                                    <span t-field="res_company.share_capital"/>
                                </div>
                                <div t-if="'vat_on_payment' in res_company._fields">
                                    <div t-if="res_company.vat_on_payment">
                                        <span>Vat on payment</span>
                                    </div>
                                </div>
                                <div>
                                    <span t-foreach="o.tax_line_ids" t-as="t">
                                        <span t-field="t.name"/>
                                    </span>
                                </div>
                            </td>
                            <td style="border-top: initial;"></td>
                            <td style="border-top: initial;">

                            </td>
                        </tr>
                    </table>


                    <h4 class="text-center">
                        <span t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')">Factura</span>
                        <span t-if="o.type == 'out_invoice' and o.state == 'proforma2'">PRO-FORMA</span>
                        <span t-if="o.type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                        <span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                        <span t-if="o.type == 'out_refund'">Invoice</span>
                        <span t-if="o.type == 'in_refund'">Supplier Refund</span>
                        <span t-if="o.type == 'in_invoice'">Supplier Invoice</span>
                        <t t-if="o.number">
                            <span t-field="o.number"/>
                        </t>
                        <!--
                        <t t-if="not o.number">
                            <span t-field="o.internal_number"/>
                        </t>
                         -->
                        <span>/</span>
                        <span t-field="o.date_invoice"/>
                        <div t-if="o.type == 'out_refund'">
                            <span>Refunds invoice</span>
                            <span t-field="o.origin"/>
                        </div>
                    </h4>
                    <!--
                    <div t-if="company.watermark_image" class="mb32 col-md-12">
                        <img t-att-src="'data:image/png;base64,%s' % company.watermark_image" style="width:100%;text-align:center;position:absolute;opacity:0.05"/>
                    </div>
                    -->
                </div> <!--end header-->
                <t t-set="nr_crt" t-value="1"/>
	                <t t-if="not currency_id">
	                    <t t-set="currency_id" t-value="o.currency_id"/>
	                </t>
	                <table class="table table-condensed  table-bordered">
	                    <thead>
	                        <tr>
	                            <th>Nr.<br />Crt</th>
	                            <th>Name</th>
	                            <th>Quantity</th>
	                            <th class="text-right">Unit price</th>
	                            <th class="text-right" t-if="with_discount(o)" groups="sale.group_discount_per_so_line">Discount (%)
	                            </th>
	                            <th class="text-right">Value</th>
	                            <th class="text-right">Taxes</th>
	                            <!-- daca se vrea cu valoare totala: -->
	                            <!-- <th class="text-right">Total cu TVA</th> -->
	                        </tr>
	                    </thead>
	                    <tbody class="invoice_tbody">
	                        <tr t-foreach="o.invoice_line_ids" t-as="l">
	                            <td>
	                                <t t-esc="nr_crt"/>
	                                <t t-set="nr_crt" t-value="nr_crt + 1"/>
	                            </td>
	                            <td>
	                                <span t-field="l.name"/>
	                            </td>
	                            <td class="text-right">
	                                <t t-set="quantity" t-value="l.quantity"/>
	                                <t t-if="o.type == 'out_refund'">
	                                    <t t-set="quantity" t-value="-1*l.quantity"/>
	                                </t>
                                    <t t-if="quantity">
                                        <t t-esc="quantity"/>
                                    </t>

	                                <span t-field="l.uom_id" groups="product.group_uom"/>
	                            </td>
	                            <td class="text-right">
	                                <t t-set="price_unit_without_taxes" t-value="l.price_unit_without_taxes"/>
	                                <!--<t t-set="price_unit_without_taxes" t-value="o.currency_id.with_context(date=o.date_invoice).compute(price_unit_without_taxes,currency_id)"/>
	                                <span id="price_unit_without_taxes" t-esc="price_unit_without_taxes"/>-->
	                            </td>
	                            <td class="text-right" t-if="with_discount(o)" groups="sale.group_discount_per_so_line">
	                                <span t-field="l.discount"/>
	                            </td>
	                            <td class="text-right">
	                                <t t-set="price_subtotal" t-value="l.price_subtotal"/>
	                                <t t-if="o.type == 'out_refund'">
	                                    <t t-set="price_subtotal" t-value="-1*l.price_subtotal"/>
	                                </t>
	                                <t t-set="price_subtotal" t-value="o.currency_id.with_context(date=o.date_invoice).compute(price_subtotal,currency_id)"/>
	                                <span id="price_subtotal" t-esc="price_subtotal"/>
	                            </td>
	                            <td class="text-right">
	                                <t t-set="price_taxes" t-value="l.price_taxes"/>
	                                <t t-if="o.type == 'out_refund'">
	                                    <t t-set="price_taxes" t-value="-1*l.price_taxes"/>

	                                </t>
	                                <t t-set="price_taxes" t-value="o.currency_id.with_context(date=o.date_invoice).compute(price_taxes,currency_id)"/>
	                                <span id="price_taxes" t-esc="price_taxes"/>
	                            </td>
	                            <!-- daca se vrea cu valoare totala: -->
	                            <!--
	                            <td class="text-right">
	                            	<span id="price_total" t-esc="formatLang(price_subtotal+price_taxes)" />
	                            </td>
	                             -->
	                        </tr>
	                    </tbody>
	                </table>
	                <div style="page-break-inside: avoid !important;">
	                    <div class="row">

	                        <div class="col-xs-8" t-if="o.type == 'out_invoice' or o.type == 'out_refund' ">
	                            <table class="table table-condensed">

	                                <tr class="border-black">
	                                    <td>Invoice created by:</td>
	                                    <td>Delivery info:</td>
	                                </tr>

	                                <tr class="border-black">
	                                    <td>
	                                        <span>Name:</span>
	                                        <span t-field="o.user_id"/><br />
	                                    </td>
	                                    <td>
                                            <!--
	                                        <div>
	                                            <span>Delegat:</span>
	                                            <span t-field="o.delegate_id"/>
	                                        </div>
	                                        <div>
	                                            <span>Mijloc de transport:</span>
	                                            <span t-field="o.mean_transp"/>
	                                        </div>
	                                        -->
	                                        <div>
	                                            <span>Signature</span>
	                                        </div>
	                                    </td>
	                                </tr>
	                            </table>
	                        </div>

	                        <div class="col-xs-4 pull-right">
	                            <table class="table table-condensed">
	                                <tr class="border-black">
	                                    <td>
	                                        <strong>Total without taxes</strong>
	                                    </td>
	                                    <td class="text-right">
	                                        <t t-set="amount_untaxeds" t-value="o.amount_untaxed"/>
	                                        <t t-if="o.type == 'out_refund'">
	                                            <t t-set="amount_untaxeds" t-value="-1*o.amount_untaxed"/>

	                                        </t>

	                                        <span id="amount_untaxeds">
	                                            <span t-esc="amount_untaxeds"/>
	                                            <span t-field="currency_id.symbol"/>
	                                        </span>
	                                    </td>
	                                </tr>
	                                <tr>
	                                    <td>Taxes</td>
	                                    <td class="text-right">
	                                        <t t-set="amount_tax" t-value="o.amount_tax"/>
	                                        <t t-if="o.type == 'out_refund'">
	                                            <t t-set="amount_tax" t-value="-1*o.amount_tax"/>
	                                        </t>

	                                        <span id="amount_tax">
	                                            <span t-esc="amount_tax"/>
	                                            <span t-field="currency_id.symbol"/>
	                                        </span>

	                                    </td>
	                                </tr>
	                                <tr class="border-black">
	                                    <td>
	                                        <strong>Total</strong>
	                                    </td>
	                                    <td class="text-right">
	                                        <t t-set="amount_total" t-value="o.amount_total"/>
	                                        <t t-if="o.type == 'out_refund'">
	                                            <t t-set="amount_total" t-value="-1*o.amount_total"/>

	                                        </t>

	                                        <span id="amount_total">
	                                            <span t-esc="amount_total"/>
	                                            <span t-field="currency_id.symbol"/>
	                                        </span>

	                                        <div t-if="currency_id!=res_company.currency_id">
	                                            (
	                                            <t t-if="o.type == 'out_refund'">
	                                                <t t-set="amount_total" t-value="-1*o.move_id.amount"/>
	                                                <t t-esc="amount_total"/>
	                                                <span t-field="res_company.currency_id.symbol"/>
	                                            </t>
	                                            <t t-if="not o.type == 'out_refund'">
	                                                <span t-field="o.move_id.amount" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: res_company.currency_id}"/>

	                                            </t>

	                                            )
	                                        </div>

	                                    </td>
	                                </tr>
	                            </table>
	                        </div>
	                    </div>


	                    <p t-if="o.comment">
	                        <strong>Comment:</strong>
	                        <span t-field="o.comment"/>
	                    </p>
                        <!--
                        <t t-set="currencies" t-value="o.get_currencies()"/>
                        <t t-foreach="currencies" t-as="currency">
                            <t t-if="not currency==company.currency_id">
                                <t t-set="curs" t-value="currency.with_context(date=o.date_invoice).compute(1,o.currency_id)"/>
                                <div>1 <span t-field="currency.name"/> =  <t t-esc="curs"/> <span t-field="o.currency_id.symbol"/> </div>
                            </t>
                        </t>

	                    <small t-if="o.type == 'out_invoice' or o.type == 'out_refund'">
	                        <div>Sistem propriu de imprimare și numerotare conform Legii 571/2003 privind Codul Fiscal cu modificările și completările ulterioare și OMFP 2226/2006.
	                        </div>

	                        <t t-if="not res_company.stamp_image">
	                            <div>Factura circula fara semnatura si stampila conform art.319 alin.(29) din Legea nr. 227/2015 privind Codul Fiscal
	                            </div>
	                        </t>
	                        <img t-if="res_company.stamp_image" t-att-src="'data:image/png;base64,%s' % res_company.stamp_image" style="max-height: 150px; "/>
	                    </small>
						<br/>
						<small>
							<div style="margin-left:-10px;">Plata acestei facturi se poate face la orice sucursala BRD sau Banca Transilvania din vecinatatea dumneavoastra specificand codul de client    "<span t-field="o.commercial_partner_id.ref"/>" si numarul facturii "<span t-field="o.number"/>"</div>
						</small>
                        -->
                        <t t-if="o.import_range">
                            <div>
                                <span>Invoiced time span:</span><span t-field="o.import_range"/>
                            </div>
                        </t>
	                    <div t-if="o.commercial_partner_id.info_for_invoice">
	                        <span t-field="o.commercial_partner_id.info_for_invoice"/>
	                    </div>
	                    <p t-if="o.payment_term_id.note">
	                        <strong>Payment Term:</strong>
	                        <span t-field="o.payment_term_id.note"/>
	                    </p>
	                    <p t-if="o.fiscal_position_id.note">
	                        <strong>Fiscal Position Remark:</strong>
	                        <span t-field="o.fiscal_position_id.note"/>
	                    </p>
	                    <div name="reference" t-if="o.reference and o.type == 'in_invoice'">
	                        <strong>Reference:</strong>
	                        <p t-field="o.reference"/>
	                    </div>
	                </div>
            </div>
    </template>

    <template id="terrabit_account_invoice_report" inherit_id="account.report_invoice">
        <xpath expr="//t[@t-call='report.html_container']" position="replace">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="terrabit_invoice_report.terrabit_report_invoice_document" t-lang="o.partner_id.lang"/>
                </t>
            </t>
        </xpath>
    </template>

	<template id="terrabit_account_invoice_report_eng">
		<t t-call="report.html_container">
			<t t-foreach="docs" t-as="o">
				<t t-call="terrabit_invoice_report.terrabit_report_invoice_document_eng"/>
			</t>
		</t>
	</template>

	<report string="Invoice - english" id="action_report_invoice_eng"
		model="account.invoice" report_type="qweb-pdf"
		name="terrabit_invoice_report.terrabit_account_invoice_report_eng" file="terrabit_invoice_report.terrabit_account_invoice_report_eng"	/>

</data>
</odoo>